<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/register.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Register</title>
</head>
<body>

<div class="hero">
    <nav class="nav">
        <img src ="/images/logo.png" class="logo" alt="logo">
        <ul>
            <li><a href="/tms/home">Home</a></li>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Knowledge Box</a></li>
        </ul>
    </nav>

    <div class="container" id="container">
        <div class="form-container sign-up-container">
            <form action="/register" method="POST">
                <input type="hidden" name="role" value="STUDENT" />
                <h1>Create Account</h1>
                <div class="mb-3 input-with-icon">
                    <i class="fas fa-user"></i>
                    <input id="firstName" name="firstName" type="text" placeholder="First Name" />
                </div>

                <div class="mb-3 input-with-icon">
                    <i class="fas fa-user"></i>
                    <input type="text" name="lastName" placeholder="Last Name" />
                </div>

                <div class="mb-3 input-with-icon">
                    <i class="fas fa-university"></i>
                    <input type="text" name="university" placeholder="University" />
                </div>

                <div class="mb-3 input-with-icon">
                    <i class="fas fa-book"></i>
                    <input type="text" name="major" placeholder="Major" />
                </div>

                <div class="mb-3 input-with-icon">
                    <i class="fas fa-envelope"></i>
                    <input type="email" name="email" placeholder="Email" />
                </div>

                <div class="mb-3 input-with-icon">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="password" placeholder="Password" />
                </div>

                <button>Sign Up</button>
                <p style="margin-bottom: 5rem;">Already have an account? <a href="/login" class="login">Login</a></p>
            </form>
        </div>

        <div class="form-container sign-in-container">
            <form action="/register" style="margin-top: 7rem;" method="POST">
                <input type="hidden" name="role" value="COMPANY" />
                <h1>Create Account</h1>
                <div class="mb-3 input-with-icon">
                    <i class="fas fa-building"></i>
                    <label>
                        <input type="text" name="name" placeholder="Company Name" />
                    </label>
                </div>

                <div class="mb-3 input-with-icon">
                    <i class="fas fa-envelope"></i>
                    <label>
                        <input type="email" name="email" placeholder="Email" />
                    </label>
                </div>

                <div class="mb-3 input-with-icon">
                    <i class="fas fa-industry"></i>
                    <label>
                        <input type="text" name="industry" placeholder="Industry" />
                    </label>
                </div>

                <div class="mb-3 input-with-icon">
                    <i class="fas fa-lock"></i>
                    <label>
                        <input type="password" name="password" placeholder="Password" />
                    </label>
                </div>

                <button>Sign Up</button>
                <p>Already have an account? <a href="/login" class="login">Login</a></p>
            </form>
        </div>

        <div class="overlay-container">
            <div class="overlay">
                <container class="overlay-panel overlay-left tcontainer">
                    <div class="box1">
                        <h1>Hey Student!</h1>
                        <p>Make the most of your professional life</p>
                        <p style="font-weight: bold">OR</p>
                        <button class="ghost" id="companySignUp">Sign Up As A Company</button>
                    </div>
                    <div class="box2">
                        <img src="/images/student.jpeg" alt="Student">
                    </div>
                </container>
                <container class="overlay-panel overlay-right tcontainer">
                    <div class="box1">
                        <h1>Hey Company!</h1>
                        <p>Find your talented skilled youth in one place</p>
                        <p style="font-weight: bold">OR</p>
                        <button class="ghost" id="studentSignUp">Sign Up As A Student</button>
                    </div>
                    <div class="box2">
                        <img src="/images/company.jpeg" alt="Company">
                    </div>
                </container>
            </div>
        </div>
    </div>
</div>

    <footer>
        <p>
            &copy; <span id="currentYear"></span> Training Management System. All rights reserved.
        </p>
    </footer>
    <script>
        const studentSignUpButton = document.getElementById('studentSignUp');
        const companySignUpButton = document.getElementById('companySignUp');
        const container = document.getElementById('container');

        studentSignUpButton.addEventListener('click', () => {
            container.classList.add("right-panel-active");
        });

        companySignUpButton.addEventListener('click', () => {
            container.classList.remove("right-panel-active");
        });

        document.getElementById('currentYear').textContent = new Date().getFullYear();

        document.addEventListener("DOMContentLoaded", () => {
            const registrationForms = document.querySelectorAll("form[action='/register']");

            registrationForms.forEach(form => {
                form.addEventListener("submit", function(event) {
                    event.preventDefault();

                    const formData = new FormData(this);
                    const userData = Object.fromEntries(formData);
                    const userDataJson = JSON.stringify(userData);

                    fetch(this.action, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: userDataJson,
                    })
                        .then(response => response.json())
                        .then(data => {
                            window.location.href = data.redirectUrl;
                        })
                        .catch((error) => {
                            console.error('Error:', error);
                        });
                });
            });
        });
    </script>
</body>
</html>